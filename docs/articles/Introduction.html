<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction • RInno</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RInno</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">1.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/cont-installation.html">Continuous Installation</a>
    </li>
    <li>
      <a href="../articles/Introduction.html">Introduction</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Introduction</h1>
                        <h4 class="author">Jonathan M. Hill</h4>
            
            <h4 class="date">2018-10-16</h4>
      
      
      <div class="hidden name"><code>Introduction.Rmd</code></div>

    </div>

    
    
<p><a href="https://codecov.io/github/ficonsulting/RInno"><img src="https://codecov.io/github/ficonsulting/RInno/branch/master/graphs/badge.svg" alt="codecov"></a> <a href="http://www.repostatus.org/#active"><img src="http://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active - The project has reached a stable, usable state and is being actively developed."></a></p>
<p>RInno makes it easy to install local shiny apps by providing an interface between R, <a href="http://www.jrsoftware.org/isinfo.php">Inno Setup</a>, an installer for Windows programs (sorry Mac and Linux users), and <a href="https://electronjs.org/">Electron</a>, a modern desktop framework used by companies like Github, Slack, Microsoft, Facebook and Docker. RInno is designed to be simple to use (two lines of code at a minimum), yet comprehensive.</p>
<p>If a user does not have R installed, the RInno installer can be configured to ask them to install R along with a shiny app, <code>include_R = TRUE</code>. And similar to Dr. Lee Pang’s <a href="https://github.com/wleepang/DesktopDeployR">DesktopDeployR</a> project, RInno provides a framework for managing software dependencies and error logging features. However, RInno also supports GitHub package dependencies, continuous installation (auto-update on start up), and it is easier to manage with <code>create_app</code>, the main RInno function. DesktopDeployR requires many manual adjustments and a deep understanding of the entire framework to use, but RInno can be learned incrementally and changes automatically flow down stream. You don’t need to remember the 100+ places impacted by changing <code>app_dir</code>. RInno only requires a high-level understanding of what you’d like to accomplish.</p>
<div id="getting-started" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-started" class="anchor"></a>Getting Started</h2>
<pre><code># Get remotes package
install.packages("remotes"); require(remotes)

# Use install_github to get RInno
install_github("ficonsulting/RInno")

# Require Package
require(RInno)

# Use RInno to get Inno Setup
install_inno()</code></pre>
</div>
<div id="minimal-example" class="section level2">
<h2 class="hasAnchor">
<a href="#minimal-example" class="anchor"></a>Minimal example</h2>
<p>Once you have developed a shiny app, you can build an installer with <code>create_app</code> followed by <code>compile_iss</code>.</p>
<pre><code># Example app included with RInno package
example_app(app_dir = "app")

# Build an installer
create_app(app_name = "Your appname", app_dir = "app")
compile_iss()</code></pre>
<p><code>create_app</code> creates an installation framework in your app’s directory, <code>app_dir</code>. The main components are a file called “app_name.iss” and the “nativefier-app” directory. You can perform minor customizations before you call <code>compile_iss</code>. For example, you can replace the default/setup icon at <a href="http://www.flaticon.com/">Flaticon.com</a>, or you can customize the pre-/post- install messages, <em>infobefore.txt</em> and <em>infoafter.txt</em>. Just remember, the default values (i.e. <code><a href="../reference/create_app.html">create_app(info_after = "infobefore.txt")</a></code>) for those files have not changed. The Inno Setup Script (ISS), <em>app_name.iss</em>, will look for <em>default.ico</em> and try to use it until you update the script or call <code>create_app</code> with the new icon’s file name (i.e. <code><a href="../reference/create_app.html">create_app(app_icon = "new.ico")</a></code>). Likewise, the Electron app will need to be recompiled to capture any manual changes to files in <code>app_dir</code>.</p>
<p>Electron is now used to render the shiny app’s UI. All other <code>user_browser</code> options will be deprecated in future releases.</p>
</div>
<div id="ui-r-requirements" class="section level2">
<h2 class="hasAnchor">
<a href="#ui-r-requirements" class="anchor"></a>ui.R Requirements</h2>
<p>In order to replace Electron’s logo with your app’s icon, add something like this to your ui.R file:</p>
<pre><code>fluidPage(
  tags$head(
    tags$link(
      rel = "icon", 
      type = "image/x-icon", 
      href = "http://localhost:1984/default.ico")
  )
)</code></pre>
</div>
<div id="server-r-requirements" class="section level2">
<h2 class="hasAnchor">
<a href="#server-r-requirements" class="anchor"></a>server.R Requirements</h2>
<p>In order to close the app when your user’s session completes:</p>
<ol style="list-style-type: decimal">
<li>Add <code>session</code> to your <code>server</code> function</li>
<li>Call <code>stopApp()</code> when the session ends</li>
</ol>
<pre><code>function(input, output, session) {

  if (!interactive()) {
    session$onSessionEnded(function() {
      stopApp()
      q("no")
    })
  }
}</code></pre>
<p>If you forget to do this, users will complain that their icons are broken and rightly blame you for it (an R session will be running in the background hosting the app, but they will need to press ctrl + alt + delete and use their task manager to close it). <strong>Not cool</strong>.</p>
</div>
<div id="package-dependency-management" class="section level2">
<h2 class="hasAnchor">
<a href="#package-dependency-management" class="anchor"></a>Package Dependency Management</h2>
<p>Provide a named character vector of packages to <code>create_app</code>, and RInno will download them and install them with your shiny app. RInno downloads windows binaries from CRAN for the listed packages and their dependencies with <code><a href="http://www.rdocumentation.org/packages/tools/topics/package_dependencies">tools::package_dependencies(packages = pkgs, recursive = TRUE)</a></code>.</p>
<pre><code>create_app(
  app_name = "myapp", 
  app_dir = "app",
  pkgs = c("shiny", "jsonlite", "httr")
)</code></pre>
<p>For <code>remotes</code>, Github source files are compiled into windows binaries. Bitbucket will be supported in a future release.</p>
</div>
<div id="custom-installations" class="section level2">
<h2 class="hasAnchor">
<a href="#custom-installations" class="anchor"></a>Custom Installations</h2>
<p>If you would like to create a custom installer from within R, you can slowly build up to it with <code>create_app</code>, like this:</p>
<pre><code>create_app(
  app_name    = "My AppName", 
  app_dir     = "My/app/path",
  dir_out     = "wizard",
  pkgs        = c("jsonlite", "shiny", "magrittr", "xkcd"),  # CRAN-like repo packages
  remotes     = c("talgalili/installr", "daattali/shinyjs"), # GitHub packages
  include_R   = TRUE,     # Download R and install it with your app, if necessary
  R_version   = "2.2.1",  # Old versions of R
  privilege   = "high",   # Admin only installation
  default_dir = "pf")     # Install app in to Program Files</code></pre>
<p><code>create_app</code> passes its arguments to most of the other support functions in RInno. You can (and probably should) specify most things there and they will get passed on. Alternatively, you can provide instructions directly to those support functions like this:</p>
<pre><code># Copy installation scripts (JavaScript, icons, infobefore.txt, package_manager.R, launch_app.R)
copy_installation(app_dir = "my/app/path")

# If your users need R installed:
get_R(app_dir = "my/app/path", R_version = "2.2.1")

# Create batch file
create_bat(app_name = "My AppName", app_dir = "my/app/path")

# Create app config file
create_config(app_name = "My AppName", R_version = "2.2.1", app_dir = "my/app/path",
  pkgs = c("jsonlite", "shiny", "magrittr", "dplyr", "caret", "xkcd"))

# Build the iss script
start_iss(app_name = "My AppName") %&gt;%

  # C-like directives
  directives_section(R_version   = "2.2.1", 
             include_R   = TRUE,
             app_version = "0.1.2",
             publisher   = "Your Company", 
             main_url    = "yourcompany.com") %&gt;%

  # Setup Section
  setup_section(output_dir  = "wizard", 
        app_version = "0.1.2",
        default_dir = "pf", 
        privilege   = "high",
        inst_readme = "pre-install instructions.txt", 
        setup_icon  = "myicon.ico",
        pub_url     = "mycompany.com", 
        sup_url     = "mycompany.github.com/issues",
        upd_url     = "mycompany.github.com") %&gt;%

  # Languages Section
  languages_section() %&gt;%

  # Tasks Section
  tasks_section(desktop_icon = FALSE) %&gt;%

  # Files Section
  files_section(app_dir = "my/app/path", file_list = "path/to/extra/files") %&gt;%

  # Icons Section
  icons_section(app_desc       = "This is my local shiny app",
        app_icon       = "notdefault.ico",
        prog_menu_icon = FALSE,
        desktop_icon   = FALSE) %&gt;%

  # Execution &amp; Pascal code to check registry during installation
  # If the user has R, don't give them an extra copy
  # If the user needs R, give it to them
  run_section() %&gt;%
  code_section() %&gt;%

  # Write the Inno Setup script
  writeLines(file.path("my/app/path", "My AppName.iss"))

  # Check your files, then
  compile_iss()
</code></pre>
<p>Feel free to read the Inno Setup <a href="http://www.jrsoftware.org/ishelp/">documentation</a> and RInno’s documentation to get a sense for what is possible. Also, please suggest useful features or build them yourself! We have a very positive culture at FI Consulting, and we would love to get your feedback.</p>
<p>Please note that this project has a <a href="https://github.com/ficonsulting/RInno/blob/master/CONDUCT.html">Contributor Code of Conduct</a>. By participating in this project you agree to abide by its terms.</p>
</div>
<div id="license" class="section level2">
<h2 class="hasAnchor">
<a href="#license" class="anchor"></a>License</h2>
<p>The RInno package is licensed under the GPLv3. See LICENSE for details.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#getting-started">Getting Started</a></li>
      <li><a href="#minimal-example">Minimal example</a></li>
      <li><a href="#ui-r-requirements">ui.R Requirements</a></li>
      <li><a href="#server-r-requirements">server.R Requirements</a></li>
      <li><a href="#package-dependency-management">Package Dependency Management</a></li>
      <li><a href="#custom-installations">Custom Installations</a></li>
      <li><a href="#license">License</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Jon Hill, W. Lee Pang, Gábor Csárdi, <a href="http://hadley.nz">Hadley Wickham</a>, Winston Chang, Jim Hester, Martin Morgan, Dan Tenenbaum.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
